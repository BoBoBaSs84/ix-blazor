"use strict";(self.webpackChunknpmjs=self.webpackChunknpmjs||[]).push([[9451],{9451:(e,t,s)=>{s.r(t),s.d(t,{ix_dropdown:()=>l});var o=s(4801),i=s(5297),n=s(9017),r=function(e,t,s,o){var i,n=arguments.length,r=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,s):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,s,o);else for(var h=e.length-1;h>=0;h--)(i=e[h])&&(r=(n<3?i(r):n>3?i(t,s,r):i(t,s))||r);return n>3&&r&&Object.defineProperty(t,s,r),r};const h=new Map;let a=0;const l=class{constructor(e){(0,o.r)(this,e),this.showChanged=(0,o.c)(this,"showChanged",7),this.autoUpdateCleanup=null,this.localUId=`dropdown-${a++}-${(new Date).valueOf()}`,this.suppressAutomaticPlacement=!1,this.show=!1,this.trigger=void 0,this.anchor=void 0,this.closeBehavior="both",this.placement="bottom-start",this.positioningStrategy="fixed",this.header=void 0,this.offset=void 0,this.triggerEvent="click",this.overwriteDropdownStyle=void 0,this.toggleBind=this.toggle.bind(this),this.openBind=this.open.bind(this),h.has(this.localUId)&&console.warn("Dropdown with duplicated id detected"),h.set(this.localUId,{dispose:this.close.bind(this),element:this.hostElement,child:null});const t=this.closestPassShadow(this.hostElement.parentNode,"ix-dropdown");if(t)for(let e of h.values())e.element===t&&(e.child=this.hostElement)}closestPassShadow(e,t){return e?e instanceof ShadowRoot?this.closestPassShadow(e.host,t):e instanceof HTMLElement&&e.matches(t)?e:this.closestPassShadow(e.parentNode,t):null}get dropdownItems(){return Array.from(this.hostElement.querySelectorAll("ix-dropdown-item"))}get slotElement(){return this.hostElement.shadowRoot.querySelector("slot")}addEventListenersFor(e){switch(e){case"click":this.triggerElement.addEventListener("click",this.openBind);break;case"hover":this.triggerElement.addEventListener("mouseenter",this.openBind);break;case"focus":this.triggerElement.addEventListener("focusin",this.openBind)}}removeEventListenersFor(e,t){switch(e){case"click":"outside"===this.closeBehavior?t.removeEventListener("click",this.openBind):t.removeEventListener("click",this.toggleBind);break;case"hover":t.removeEventListener("mouseenter",this.openBind);break;case"focus":t.removeEventListener("focusin",this.openBind)}}async registerListener(e){this.triggerElement=await this.resolveElement(e),this.triggerElement&&(Array.isArray(this.triggerEvent)?this.triggerEvent.forEach((e=>{this.addEventListenersFor(e)})):this.addEventListenersFor(this.triggerEvent))}async unregisterListener(e){const t=await this.resolveElement(e);Array.isArray(this.triggerEvent)?this.triggerEvent.forEach((e=>{this.removeEventListenersFor(e,t)})):this.removeEventListenersFor(this.triggerEvent,t)}resolveElement(e){if("string"!=typeof e)return Promise.resolve(e);const t=`#${e}`;return new Promise((e=>{if(document.querySelector(t))return e(document.querySelector(t));const s=new MutationObserver((()=>{document.querySelector(t)&&(e(document.querySelector(t)),s.disconnect())}));s.observe(document.body,{childList:!0,subtree:!0})}))}async changedShow(e){e&&(this.anchorElement=await(this.anchor?this.resolveElement(this.anchor):this.resolveElement(this.trigger)),this.anchorElement&&this.applyDropdownPosition()),e&&h.forEach(((e,t)=>{t===this.localUId||this.isAnchorSubmenu()||e.child===this.hostElement||e.dispose()}))}changedTrigger(e,t){e&&this.registerListener(e),t&&this.unregisterListener(t)}clickOutside(e){var t,s;const o=e.target;if(e.defaultPrevented)return;if(!1===this.show||!1===this.closeBehavior||(null===(t=this.anchorElement)||void 0===t?void 0:t.contains(o))||(null===(s=this.triggerElement)||void 0===s?void 0:s.contains(o)))return;const i=this.isClickInsideDropdown(e);switch(this.closeBehavior){case"outside":i&&this.anchor!==o||this.close();break;case"inside":i&&this.hostElement!==o&&this.close();break;case"both":this.hostElement!==o&&this.close();break;default:this.close()}}keydown(e){!0===this.show&&"Escape"===e.code&&this.close()}isNestedDropdown(e){return e.closest("ix-dropdown")}isAnchorSubmenu(){var e;return!!(null===(e=this.anchorElement)||void 0===e?void 0:e.closest("ix-dropdown-item"))}toggle(e){e.preventDefault(),this.isNestedDropdown(e.target)&&e.stopPropagation();const{defaultPrevented:t}=this.showChanged.emit(this.show);t||(this.show=!this.show)}open(e){e.preventDefault(),this.isNestedDropdown(e.target)&&e.stopPropagation();const{defaultPrevented:t}=this.showChanged.emit(!0);t||(this.show=!0)}close(){const{defaultPrevented:e}=this.showChanged.emit(!1);e||(this.show=!1)}async applyDropdownPosition(){if(!this.anchorElement)return;if(!this.dropdownRef)return;const e=this.isAnchorSubmenu();let t={strategy:this.positioningStrategy,middleware:[]};this.suppressAutomaticPlacement||t.middleware.push((0,i.f)({fallbackStrategy:"initialPlacement"})),t.placement=e?"right-start":this.placement,t.middleware=[...t.middleware,(0,i.i)(),(0,i.s)()],this.offset&&t.middleware.push((0,i.o)(this.offset)),this.autoUpdateCleanup&&(this.autoUpdateCleanup(),this.autoUpdateCleanup=null),this.autoUpdateCleanup=(0,i.a)(this.anchorElement,this.dropdownRef,(async()=>{const e=await(0,i.c)(this.anchorElement,this.dropdownRef,t);if(Object.assign(this.dropdownRef.style,{top:"0",left:"0",transform:`translate(${Math.round(e.x)}px,${Math.round(e.y)}px)`}),this.overwriteDropdownStyle){const e=await this.overwriteDropdownStyle({dropdownRef:this.dropdownRef,triggerRef:this.triggerElement});Object.assign(this.dropdownRef.style,e)}}),{ancestorResize:!0,ancestorScroll:!0,elementResize:!0})}async componentDidLoad(){this.changedTrigger(this.trigger,null)}async componentDidRender(){var e;await this.applyDropdownPosition(),this.anchorElement=await(this.anchor?this.resolveElement(this.anchor):this.resolveElement(this.trigger)),this.isAnchorSubmenu()&&"IX-DROPDOWN-ITEM"===(null===(e=this.anchorElement)||void 0===e?void 0:e.tagName)&&(this.anchorElement.isSubMenu=!0)}isClickInsideDropdown(e){const t=this.dropdownRef.getBoundingClientRect();return t.top<=e.clientY&&e.clientY<=t.top+t.height&&t.left<=e.clientX&&e.clientX<=t.left+t.width}disconnectedCallback(){this.autoUpdateCleanup&&this.autoUpdateCleanup(),h.has(this.localUId)&&h.delete(this.localUId)}async updatePosition(){this.applyDropdownPosition()}render(){return(0,o.h)(o.H,{ref:e=>this.dropdownRef=e,class:{"dropdown-menu":!0,show:this.show,overflow:!0},style:{margin:"0",minWidth:"0px",position:this.positioningStrategy},role:"list"},(0,o.h)("div",{style:{display:"contents"}},this.header?(0,o.h)("div",{class:"dropdown-header"},this.header):"",(0,o.h)("slot",null)))}get hostElement(){return(0,o.g)(this)}static get watchers(){return{show:["changedShow"],trigger:["changedTrigger"]}}};r([(0,n.O)("click",(e=>e.show))],l.prototype,"clickOutside",null),r([(0,n.O)("keydown",(e=>e.show))],l.prototype,"keydown",null),l.style=":host{background-color:var(--theme-color-2);border-radius:var(--theme-default-border-radius);min-width:0px;z-index:var(--theme-z-index-dropdown);box-shadow:var(--theme-shadow-4);padding:0.25rem 0px}:host *,:host *::after,:host *::before{box-sizing:border-box}:host ::-webkit-scrollbar-button{display:none}:host ::-webkit-scrollbar{width:0.5rem;height:0.5rem}:host ::-webkit-scrollbar-track{border-radius:5px;background:var(--theme-scrollbar-track--background)}:host ::-webkit-scrollbar-track:hover{background:var(--theme-scrollbar-track--background--hover)}:host ::-webkit-scrollbar-thumb{border-radius:5px;background:var(--theme-scrollbar-thumb--background)}:host ::-webkit-scrollbar-thumb:hover{background:var(--theme-scrollbar-thumb--background--hover)}:host ::-webkit-scrollbar-corner{display:none}:host .dropdown-header{display:flex;align-items:center;height:2.5rem;color:var(--theme-menu-header--color);padding:0 1rem}:host(.overflow){max-height:50vh;overflow-y:auto}:host(:not(.show)){display:none}"},9017:(e,t,s)=>{s.d(t,{O:()=>n});var o=s(4801);const i={target:"window",defaultEnabled:!0};function n(e,t){return(s,n)=>{const{componentWillLoad:r,componentWillRender:h,disconnectedCallback:a}=s;s.componentWillRender=function(){return(0,o.g)(this)[`__ix__${n}`].enable(t(this)),h&&h.call(this)},s.componentWillLoad=function(){const t=function(e,t={}){const s=Object.assign(Object.assign({},i),t);let o;const n=e=>{o(e)},r={on:e=>{o=e},isEnabled:s.defaultEnabled,enable:t=>{r.isEnabled=t,t?addEventListener(e,n):removeEventListener(e,n)},destroy:()=>{r.enable(!1)}};return r.enable(s.defaultEnabled),r}(e),s=(0,o.g)(this),h=this[n];return s[`__ix__${n}`]=t,t.on(h.bind(this)),r&&r.call(this)},s.disconnectedCallback=function(){const e=(0,o.g)(this);return e[`__ix__${n}`].destroy(),e[`__ix__${n}`]=null,a&&a.call(this)}}}}}]);